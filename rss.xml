<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[僕は一寸]]></title><description><![CDATA[俺は空洞　でかい空洞]]></description><link>https://misoni.me</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 04 Oct 2020 05:44:27 GMT</lastBuildDate><item><title><![CDATA[Mastodon を ConoHa VPS の Arch Linux にインストールする]]></title><description><![CDATA[いつものごとく突発的な思いつきで、自分用の Mastodon インスタンスを建てようと思い VPS を借りた。基本的には公式のガイドに沿ってるだけなのだが、Arch Linux で建てましたという日本語の記録はあまり見かけなかったので記しておく。 構成 ConoHa VPS…]]></description><link>https://misoni.me/blog/2020-10-04/</link><guid isPermaLink="false">https://misoni.me/blog/2020-10-04/</guid><pubDate>Sun, 04 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;いつものごとく突発的な思いつきで、自分用の Mastodon インスタンスを建てようと思い VPS を借りた。基本的には公式のガイドに沿ってるだけなのだが、Arch Linux で建てましたという日本語の記録はあまり見かけなかったので記しておく。&lt;/p&gt;
&lt;h2&gt;構成&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ConoHa VPS の 1GB プラン&lt;/li&gt;
&lt;li&gt;Arch Linux (サーバー作成時に選べるイメージを使用)&lt;/li&gt;
&lt;li&gt;ムームードメインで取得したドメインのサブドメインで運用 ( &lt;a href=&quot;https://mstdn.misoni.me&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;mstdn.misoni.me&lt;/a&gt; )&lt;/li&gt;
&lt;li&gt;Mastodon 3.2.0&lt;/li&gt;
&lt;li&gt;メールサーバーは&lt;strong&gt;用意しない&lt;/strong&gt; (一人用なので要らないと考えた)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;DNS の設定&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; margin-top: 20px; margin-bottom: 20px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f51ae441690a41a55a2c9506feacd436/d6b80/muumuu-domain.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACi0lEQVQoz0WR3W/bZBSH+3/CgJsJBBISXCMk/gYudglSEWwSiGrQlXWsZaAmzda4cRrHbtzEcew4TurvjyQstR9O0klcPLLk97znPL/z7tXGI+rnH1MdPqD68zOq0y+oTj6nOn5IffgevPwUml9TP/uA+ugj6j8+pD77Smo/kTvvg/yn9Q389SX0v2Wvdo64056yvHzMSj8Ujnas+79TKj8RNPZJtGOy1j558zuKN/sUnQMK5Qmr7i/Eje8Znz3BfvUDufGzNMwNNsu35GlJua4plnc7yn8hSUrsGxt/kXLrh4SuR7wIiWczkiCSugrPmaGofVR1IOcX7FVRh00wI/cd8jAQbsmDBUUUknoOE03l1nUJLJPA6BAOdaFPNB5I3Zz5jc6V0kZTFGL7TAyTLps4oFh4lGlCmcT3pCnpfIZjaCymHsHEIhoZJK61I53alHGEPxzQlYY9pUM0aUjDtMcmS3dmRVFS5MWOslySBgGOOWDuBwTvLKPpRCK7wpQiy/FtS+J2uVI1IudcIscd3gY+xVwKxKyQ2DtkeioXjTdN5hOHyB6R3GhkzpDEuiazTQqJnIttITJllLBaKP8bxtvJ/owszXbkWUEmjfvtC4bmEM+yePXimPPGOa3mOeplB13rMx2a6LqB0R8Qu6/f7TCJiMfXsmjz3nK7QxmSLXwGnTbueIxrGvz6+Ed+Ozjg75OXnErzf05PmBg9upcK3fbl/Q6rePsoMYkzFsspmahvyZOMxJ/Loxjcegv80Qi11ULr9hibI0z9msnQYjq4RlVUrtpdWUtza6iwicashHXhs0rdHetsyjK0CO0eoWeS+QOqwqNeB2xKn7vlnDv5Rk6PG/01I/2CzGvwH8QjGXlA+78gAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;muumuu domain&quot;
        title=&quot;muumuu domain&quot;
        src=&quot;/static/f51ae441690a41a55a2c9506feacd436/b06ae/muumuu-domain.png&quot;
        srcset=&quot;/static/f51ae441690a41a55a2c9506feacd436/0d3e1/muumuu-domain.png 140w,
/static/f51ae441690a41a55a2c9506feacd436/908b1/muumuu-domain.png 280w,
/static/f51ae441690a41a55a2c9506feacd436/b06ae/muumuu-domain.png 560w,
/static/f51ae441690a41a55a2c9506feacd436/1e088/muumuu-domain.png 840w,
/static/f51ae441690a41a55a2c9506feacd436/f43e4/muumuu-domain.png 1120w,
/static/f51ae441690a41a55a2c9506feacd436/d6b80/muumuu-domain.png 1393w&quot;
        sizes=&quot;(max-width: 560px) 100vw, 560px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;auto&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ムームー DNS 側でサブドメインを切り、VPS の IP アドレスを指定する。AAAA レコードには IPv6 アドレスを、A レコードには IPv4 アドレスを入れる。まあ、ここの情報は山のようにあるので各自で頑張ってくれ。&lt;/p&gt;
&lt;h2&gt;VPS自体の初期設定&lt;/h2&gt;
&lt;p&gt;SSH 接続して作業用ユーザーを作成して sudo の設定をして root ログインを無効化して公開鍵認証にしてパスワードログインを無効化した。こちらも情報は山のようにあるので各自で頑張ってくれ。&lt;/p&gt;
&lt;h2&gt;必要なパッケージの入手&lt;/h2&gt;
&lt;p&gt;Mastodon を動かすのに必要なパッケージをインストールする。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; pacman -Syu
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; pacman -S base-devel ffmpeg imagemagick libidn libpqxx libxml2 libxslt libyaml nodejs postgresql protobuf redis &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; zlib &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; nginx certbot-nginx&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ruby はバージョンを指定してインストールする必要があるため、rbenv というツールを利用する。これは pyenv の Ruby 版みたいなものだ。&lt;code class=&quot;language-text&quot;&gt;.bashrc&lt;/code&gt; の設定なども必要になるため、この時点で &lt;code class=&quot;language-text&quot;&gt;mastodon&lt;/code&gt; というユーザーを作成する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useradd&lt;/span&gt; --create-home mastodon&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;作成したら、ユーザーを &lt;code class=&quot;language-text&quot;&gt;mastodon&lt;/code&gt; に切り替える。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;su&lt;/span&gt; - mastodon&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;rbenv&lt;/code&gt; と &lt;code class=&quot;language-text&quot;&gt;rbenv-build&lt;/code&gt; を導入する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/rbenv/rbenv.git ~/.rbenv
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ~/.rbenv &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; src/configure &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; -C src
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;export PATH=&quot;&lt;span class=&quot;token environment constant&quot;&gt;$HOME&lt;/span&gt;/.rbenv/bin:&lt;span class=&quot;token environment constant&quot;&gt;$PATH&lt;/span&gt;&quot;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; ~/.bashrc
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;eval &quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;rbenv init -&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; ~/.bashrc
&lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ここまで完了したら、Ruby 2.6.6 をインストールする。&lt;code class=&quot;language-text&quot;&gt;Installing Ruby 2.6.6...&lt;/code&gt;みたいな表示のまま結構時間がかかるが、フリーズしているわけではない。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;RUBY_CONFIGURE_OPTS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;--with-jemalloc rbenv &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2.6&lt;/span&gt;.6
rbenv global &lt;span class=&quot;token number&quot;&gt;2.6&lt;/span&gt;.6&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ruby-bundler&lt;/code&gt;もインストールする。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;gem &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; bundler --no-document&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;終わったら一旦 &lt;code class=&quot;language-text&quot;&gt;mastodon&lt;/code&gt; から離脱する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;PostgreSQL と Redis の設定&lt;/h2&gt;
&lt;p&gt;PostgreSQL のデータベースを初期化し、PostgreSQL と Redis のサービスを有効化する。何やってるのか理解してない。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;su&lt;/span&gt; - postgres -c &lt;span class=&quot;token string&quot;&gt;&quot;initdb --locale en_US.UTF-8 -D &apos;/var/lib/postgres/data&apos;&quot;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl &lt;span class=&quot;token builtin class-name&quot;&gt;enable&lt;/span&gt; --now postgresql redis&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;次に、PostgreSQL に Linux 側のユーザー名と同じ &lt;code class=&quot;language-text&quot;&gt;mastodon&lt;/code&gt; という名前のユーザーを作成する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;su&lt;/span&gt; - postgres -s /bin/sh -c &lt;span class=&quot;token string&quot;&gt;&quot;createuser -d mastodon&quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上で PostgreSQL と Redis の設定は終わり。&lt;/p&gt;
&lt;h2&gt;Mastodon のセットアップ&lt;/h2&gt;
&lt;p&gt;AUR にも Mastodon が置いてあるのだが、バージョンが 3.1.4 と少し古かったので普通に GitHub から clone した。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt; を利用して Mastodon をダウンロードし、安定版リリースを checkout する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/tootsuite/mastodon.git live &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; live
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; checkout &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; tag -l &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; -v &lt;span class=&quot;token string&quot;&gt;&apos;rc[0-9]*$&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt; -V &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tail&lt;/span&gt; -n &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ruby と JavaScript 関連の依存関係にあるパッケージをインストールする。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;bundle config deployment &lt;span class=&quot;token string&quot;&gt;&apos;true&apos;&lt;/span&gt;
bundle config without &lt;span class=&quot;token string&quot;&gt;&apos;development test&apos;&lt;/span&gt;
bundle &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -j&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;getconf _NPROCESSORS_ONLN&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; --pure-lockfile&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mastodon のセットアップウィザートを立ち上げる。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;RAILS_ENV&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;production bundle &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; rake mastodon:setup&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これはウィザードに従っていれば簡単に完了する。ドメインや、クラウドストレージ ( S3とか ) 利用の可否、メールサーバーの設定等が対話形式で進んでいく。今回は自分専用のインスタンスなので、メールサーバーの設定は全て空欄で押し通した。&lt;/p&gt;
&lt;p&gt;最後に admin アカウントの設定ができるが、その際に非常に長いパスワードが生成される。忘れると再びセットアップをやり直さなければいけないと思われるので、何かしらの方法で控えておくことを推奨する。&lt;/p&gt;
&lt;p&gt;以上で Mastodon 本体のセットアップは完了である。ユーザー &lt;code class=&quot;language-text&quot;&gt;mastodon&lt;/code&gt; から離脱する。&lt;/p&gt;
&lt;h2&gt;nginx の設定&lt;/h2&gt;
&lt;p&gt;最後に nginx の設定をする。&lt;/p&gt;
&lt;p&gt;まず、&lt;code class=&quot;language-text&quot;&gt;certbot&lt;/code&gt; を利用して SSL 証明書を発行する。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; certbot --nginx -d mstdn.misoni.me&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;適当に進めていけばいい。意識他界系なので “メールアドレスをどっかの調査会社と共有” みたいなやつは拒否した。意識他界系なので。&lt;/p&gt;
&lt;p&gt;デフォルトの config ファイルを &lt;code class=&quot;language-text&quot;&gt;sites-available&lt;/code&gt; にコピーし、&lt;code class=&quot;language-text&quot;&gt;sites-enabled&lt;/code&gt; にシンボリックリンクを張る。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; /etc/nginx
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; sites-available sites-enabled
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; /home/mastodon/live/dist/nginx.conf sites-available/mastodon
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ln&lt;/span&gt; -s sites-available/mastodon sites-enabled/mastodon&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/etc/nginx/sites-enabled/mastodon&lt;/code&gt; 内の &lt;code class=&quot;language-text&quot;&gt;example.com&lt;/code&gt; を&lt;strong&gt;全て&lt;/strong&gt;自身のドメインに置き換える。今回は &lt;code class=&quot;language-text&quot;&gt;mstdn.misoni.me&lt;/code&gt; に置き換えた。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; sites-available/mastodon -e &lt;span class=&quot;token string&quot;&gt;&apos;s/example\.com/mstdn\.misoni\.me/g&apos;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;としてもいいし、エディタで書き換えてもいい。&lt;/p&gt;
&lt;p&gt;また、SSL を有効化するために &lt;code class=&quot;language-text&quot;&gt;ssl_certificate&lt;/code&gt; と &lt;code class=&quot;language-text&quot;&gt;ssl_certificate_key&lt;/code&gt; の行をアンコメントする。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;nginx.conf&lt;/code&gt; の &lt;code class=&quot;language-text&quot;&gt;http {...}&lt;/code&gt; ブロックの末尾に &lt;code class=&quot;language-text&quot;&gt;include /etc/nginx/sites-enabled/*;&lt;/code&gt; を追記し、&lt;code class=&quot;language-text&quot;&gt;sites-enabled/&lt;/code&gt; 下のファイルを読むようにする。&lt;/p&gt;
&lt;p&gt;設定が終わったら nginx サービスを立ち上げる。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl &lt;span class=&quot;token builtin class-name&quot;&gt;enable&lt;/span&gt; --now nginx&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;systemd サービスの設定&lt;/h2&gt;
&lt;p&gt;いよいよ最後のステップ。Mastodon の systemd テンプレートをシステムにコピーする。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; /home/mastodon/live/dist/mastodon-web.service /etc/systemd/system/
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; /home/mastodon/live/dist/mastodon-sidekiq.service /etc/systemd/system/
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; /home/mastodon/live/dist/mastodon-streaming.service /etc/systemd/system/&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;そしてサービスを起動。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl daemon-reload
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl &lt;span class=&quot;token builtin class-name&quot;&gt;enable&lt;/span&gt; --now mastodon-web mastodon-sidekiq mastodon-streaming&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;はい、お疲れさま。&lt;/p&gt;
&lt;h2&gt;トラブルシューティング&lt;/h2&gt;
&lt;h3&gt;nginx が &lt;code class=&quot;language-text&quot;&gt;# nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)&lt;/code&gt; と表示されて起動しない&lt;/h3&gt;
&lt;p&gt;80番ポートを占領されているらしい。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;lsof&lt;/code&gt; というツールを使って80番ポートを使っているプロセスを調べる。lsof は pacman からインストールできる。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; pacman -S &lt;span class=&quot;token function&quot;&gt;lsof&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lsof&lt;/span&gt; -i:80

COMMAND PID &lt;span class=&quot;token environment constant&quot;&gt;USER&lt;/span&gt; FD TYPE DEVICE SIZE/OFF NODE NAME  
nginx &lt;span class=&quot;token number&quot;&gt;22964&lt;/span&gt; root 4u IPv4 &lt;span class=&quot;token number&quot;&gt;21601&lt;/span&gt; 0t0 TCP *:http &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;LISTEN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
nginx &lt;span class=&quot;token number&quot;&gt;22965&lt;/span&gt; nginx 4u IPv4 &lt;span class=&quot;token number&quot;&gt;21601&lt;/span&gt; 0t0 TCP *:http &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;LISTEN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nginx が既に立ち上がっていたのか、nginx 自身が80番ポートを使っていたらしい。lsof 使用時に pid も表示されるので、pid を指定して kill して、もう一度 nginx を立ち上げる。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;22964&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; systemctl start nginx&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;静的ファイルが全部 404 になる&lt;/h3&gt;
&lt;p&gt;権限の問題かもしれないし、単に再起動したから直ったのかもしれないが、下記のコマンドで動くようになった。このコマンドが正しいのかもセキュリティ的に大丈夫なのかも、ぜんぜんわからない。俺は雰囲気で Arch をやっている。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; +x /home/mastodon/live/public/
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; +x /home/mastodon/
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reboot&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;間違い等あったら Twitter か Discord、もしくは Mastodon で教えていただけると助かる。では。&lt;/p&gt;
&lt;h2&gt;参考&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://liolok.github.io/Run-a-Mastodon-Server-on-Arch-Linux-VPS/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Run a Mastodon Server on Arch Linux VPS | LIOLOG&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.joinmastodon.org/admin/install/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Installing from source - Mastodon documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://qiita.com/Sue_chan/items/fb9fc616efe5bf1b30b4&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Fedra 30に nginxをインストール・設定 - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://easyramble.com/nginx-emerg-bind-failed.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use) | EasyRamble&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Simplenoteというメモサービスが良い感じ]]></title><description><![CDATA[Google Keep の代替を探していた 詳細は Scrapbox に書いてあるが、最近、Google 一社のサービスに大きく依存しているのが嫌になって、色々な代替サービスへの乗り換えを始めている。僕は Google Keep という Google…]]></description><link>https://misoni.me/blog/2020-08-25/</link><guid isPermaLink="false">https://misoni.me/blog/2020-08-25/</guid><pubDate>Tue, 25 Aug 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Google Keep の代替を探していた&lt;/h2&gt;
&lt;p&gt;詳細は &lt;a href=&quot;https://scrapbox.io/MISONLN41/%E4%B8%80%E7%A4%BE%E3%81%AB%E4%BE%9D%E5%AD%98%E3%81%99%E3%82%8B%E3%81%AE%E3%82%92%E3%82%84%E3%82%81%E3%82%8B&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Scrapbox&lt;/a&gt; に書いてあるが、最近、Google 一社のサービスに大きく依存しているのが嫌になって、色々な代替サービスへの乗り換えを始めている。僕は Google Keep という Google のメモサービスのヘビーユーザーで、何かあればとりあえずこれにメモをとってきた。気になった店、ふと思いついた言い回し、ブログの下書き。面白そうなツイートや Web サイトがあればとりあえず Google Keep に追加して、後からじっくり見返す。思考の第ゼロ段階として、大いに役立っていた。が、これも当然脱 “Google 依存” の一環として代替となるサービスを探そうということに。しかし、Google Keep の代替に値するメモサービスがなかなか見つからなかった。そんな中試してみた &lt;a href=&quot;https://simplenote.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Simplenote&lt;/a&gt; というメモサービスがかなり良かったので、その良さを書いていこうと思う。&lt;/p&gt;
&lt;h2&gt;Google Keep の何が良かったのか&lt;/h2&gt;
&lt;p&gt;メモサービスと言えば Evernote や OneNote、Dropbox Paper などが有名だろうか。Scrapbox や Notion も広義のメモサービスに入るだろう。しかし、僕はこれらのメモサービスを Google Keep の代替として使う気にはなれなかった。&lt;/p&gt;
&lt;p&gt;複雑すぎるのだ。&lt;/p&gt;
&lt;p&gt;僕が Google Keep をどうやって使っていたのかと言うと、専ら付箋代わり。一言二言の短い書き込みに、URL を貼ったりする程度だ。しかし、Evernote や OneNote、Dropbox Paper 等はそういう使い方にはあまり向いていない。タグを付けたり、フォルダで管理できたり、文字装飾があったり。それらの機能によって UI がごちゃごちゃしているのだ。それがどうにも慣れかったので、どれも少し触った程度ですぐに使わなくなってしまった。Scrapbox は確かに付箋代わりのような使い方もできるのだけれど、Google Keep の代替として使うには2つだけ致命的な欠点があった。一つは、僕のスマホ(Zenfone Max Pro M1)では少々重いということ、もう一つは、共有メニューからページを追加できないことだ。ツイートや Web サイトをメモする時、僕は共有メニューを利用していた。Scrapbox ではこれができない。Web Share Target API というのがあるので、不可能ではないはずだが、今のところ Scrapbox では共有メニューからページを追加することが出来ない。&lt;/p&gt;
&lt;h2&gt;Simplenoteを知る&lt;/h2&gt;
&lt;p&gt;そんな感じだったものだから、メモアプリは Google Keep を使い続けるしかないかなあ… という気分にもなっていた。しかし、そんな中偶然見つけたのが、“Simplenote” だ。正直なところあまり期待していなかったのだが、とりあえず試してみることにした。&lt;/p&gt;
&lt;h2&gt;その名の通り超シンプル&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; margin-top: 20px; margin-bottom: 20px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b8dc91382ceca22625b1b29d65620771/5d6a0/simplenote-top.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.71428571428572%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVQoz2WTa3OaYBCFafuhkzRjJjbeqqLIHQRELgoa00zb//+TTs4uktrphzMr8PKwZ89qxPsjsrpFUh6pE9Z+iqXtUx5MJ8DKDT+q5ccfkuvuGauXYOVnVArDDmLYfgTLC7GhVo6PxcZTOVGKIMlVTpjAizO4vOeyboKtguVj8vHJYo2qfYHx9e4ehmGoPn3+goXlaodz1mhXojiesD90yujCT3bwthn87U4lvwU6IvD89hvG4Ok77r494J56GDxiyc56YFLUOP38hep0QU1V7QXN5Q1l84L80GLPjwXpHibPjwmUs4ZYtVzOiG0vLec6vw4YpLl2VdKKSLo8nF8Jf9Xfed2o9eUtcLZYYTpf4nkyw3A00Xn0QI+Wkn2NtDzQfqEvi2zOU2a69iK1K/oLNNcYTecYjmd4ZjWvHUooAkyLg1oPaU1B11CcKIFNuJz7BxjnFXZcm4o2pMrDPmVJNc5LBftMuk+2rxa34z+gDFVsRVmhAPNmhnJPZihAXRlKwDJbWSVJudvFmxmKlZQvbQmVF3obAtyye0m1aM7d2lRHTbtPXGTfhNIKULuoGgIrhYa8FphAY+6h7uB1F0uC+7TlfM4RSTAC7PbwD4zheIpH7uLgachwfqiVHighiEVPQ+j+NXrNZdYZXmGiqbnBjo29A0ItYsWJyxtNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Simplenote のトップページ&quot;
        title=&quot;Simplenote のトップページ&quot;
        src=&quot;/static/b8dc91382ceca22625b1b29d65620771/b06ae/simplenote-top.png&quot;
        srcset=&quot;/static/b8dc91382ceca22625b1b29d65620771/0d3e1/simplenote-top.png 140w,
/static/b8dc91382ceca22625b1b29d65620771/908b1/simplenote-top.png 280w,
/static/b8dc91382ceca22625b1b29d65620771/b06ae/simplenote-top.png 560w,
/static/b8dc91382ceca22625b1b29d65620771/1e088/simplenote-top.png 840w,
/static/b8dc91382ceca22625b1b29d65620771/f43e4/simplenote-top.png 1120w,
/static/b8dc91382ceca22625b1b29d65620771/5d6a0/simplenote-top.png 1580w&quot;
        sizes=&quot;(max-width: 560px) 100vw, 560px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;auto&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;とりあえず登録してみて、画面を見て感じたのが、とてもシンプルな作りになっているということ。何処にどの機能があるのかがすぐに分かる。Web 版は 2 カラム構成になっていて、左にメモ一覧、右にメモの本文が表示されるようになっている。入力すればリアルタイムに保存される。同期は早く、スマホと Web 版で同時に開いて編集してみても、せいぜい 2、3 秒で同期される (が、編集中に両方開いておくと同期のコンフリクトが起きて入力した文が壊れる場合があった)。検索は素早く、全文検索が可能だ。そして、タグ管理ができる。僕はメモにタグ付けはあまりしようと思わないが、タグを設定するテキストボックス (?) がページ下部に目立たない感じで配置してあるので、「無駄な機能でごちゃごちゃしている」といった印象は全くない。こういう、主張しない UI というのもまたシンプルな感じで良い。&lt;/p&gt;
&lt;h2&gt;気の利いた便利機能&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; margin-top: 20px; margin-bottom: 20px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dfa5427c97f24ebd8f27b4504e2eb187/91608/simplenote-history.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABYElEQVQoz22QSVLCQBiFcw7mkJCQATJ0EkgYAmKVW3dWMWws0YXDxhu48xTeA9CFG5eCHOj5d2MQKRdfvT/5+71X3RK7/MQhrfka8c0G/dsvDO62GD1sMbzfKf/mO077eoNjL0dyx0tkOOMFvMkSPsGmSwSzJdL5G66ePvD8ssb54zvsiwXYbAV/uvN4k1ditUcq1WwUCa5y3UFFd1DWmigRiulBtTyYDoPDAtRsV+xLP+c5FYMRIRFAJpUK1Ro4RcJyGWwvEJiuL1Q1GlDNJqp1MmsmZN1ErlxFrqKgIKt7L58rmgGpqOj0U0dJrcONEnitDnzCCWNYXrjDDdDwIyoIYZPyuclaoqRQ1bDL0KjMygI1ERh1U6SnZ0gGI0GHaPeGCJM+WLuLIOkh6qRgcRdxegKDniIv134D6QYi8LBBsxzRzK+qEHyXlzWxPybz/gk8XPCZNx7ynzHTYy8P/AYTVRANp4fvtQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Simplenote の History 機能&quot;
        title=&quot;Simplenote の History 機能&quot;
        src=&quot;/static/dfa5427c97f24ebd8f27b4504e2eb187/b06ae/simplenote-history.png&quot;
        srcset=&quot;/static/dfa5427c97f24ebd8f27b4504e2eb187/0d3e1/simplenote-history.png 140w,
/static/dfa5427c97f24ebd8f27b4504e2eb187/908b1/simplenote-history.png 280w,
/static/dfa5427c97f24ebd8f27b4504e2eb187/b06ae/simplenote-history.png 560w,
/static/dfa5427c97f24ebd8f27b4504e2eb187/1e088/simplenote-history.png 840w,
/static/dfa5427c97f24ebd8f27b4504e2eb187/f43e4/simplenote-history.png 1120w,
/static/dfa5427c97f24ebd8f27b4504e2eb187/91608/simplenote-history.png 1251w&quot;
        sizes=&quot;(max-width: 560px) 100vw, 560px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;auto&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Simplenote はただシンプルなだけでなく、気の利いた機能がいくつもある。例えば、字数カウントと語数カウント。ブログの下書きを書いている時など、どれぐらい文字を書いたのかがすぐに分かるのは便利だ。そして、History 機能。これを使うとメモの上部にスライダーが表示され、それ以前のメモの履歴を確認することが出来る。Scrapbox にある Page History と同じような機能だ。内容を大幅に書き換えた後からでも、書き換える前の状態を復元できるというのはなかなか便利なのではないだろうか。そして一部の人が目を輝かせて喜びそうな機能として、Markdown への対応がある。メモの Info から Markdown のオプションを有効化すると、そのメモの Markdown プレビューを利用することが可能になる。プレビューが使えるというだけなのですごく便利かと言ったら微妙だが、自分が書いた Markdown が間違っていないか、のチェックぐらいには使えるだろう。他にもメモの共有リンクの作成や共同編集、ダークモードへの対応などもある。&lt;/p&gt;
&lt;h2&gt;共有メニューから追加できる&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; margin-top: 20px; margin-bottom: 20px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/79a896db93147049813ddc973cb47ca2/302a4/simplenote-share.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAC4jAAAuIwF4pT92AAADZUlEQVQ4y42T22scVRzH569ocyFpbfeWZi8ze52d3Z3sbfaWZDe7myZppTX2ZhNJaQ0JSQw1bRFNiiYQ06Yl1EK7gUJFjNBa9KmlT6IgqA+ib/qmD4IvIvLxzGwTVDT68OH3O+f8znfmfM/vSB2tXXS0uv4D5//AIbAjte9x0r7XRdseh0X7XnPs2AX7rkjdziBOe4BDjhBdjiCOgzJOm7KD48Bfx03kf8S234OUM6oUswMYgqReIhhIEFBiO6jhJIpPIyTmg/7dCShxpPG+kzyd2WQ4fRh/sId3lz9h/sIqdpuXmenX2Lhxh1RPEZ9HtTb45diuSGf6XuSjyVvUUzUCQrCx9oRL0+s4hOD83GU2794nnSztCG7zr4LpdC+FwgBmTCWL5HNlspleIuKoPYkCxfwAYfEhs3hbyIzbR/w7UjSSJhrJENeyxKJZNJFHIynhmW75F4tmrHxbxMzNqHg1S9zKhceyL9oU7C/VKRdrYmNOHK2XYFCzCsxFnzchaP5VXMuhqVnhZ6+o6yMWzxMOp6xaPWqQihVQZA1pdeMBa5ufElZ6eH68j6UHx5GTXkJKntVbj5m6eAeXQ6FSPsrkKxfxuFWGq0f44fPPWHl9EZctwPX3brO2dZtcqh9paf0R9x5+RcSfZPC0wdhNwxIM+4ssXXvM+bmGJVivvcClhau4u1VGakf56dtveOfqMl02Pzc/aHD9w7sUMhWklG6Q1nPCeP2ZP3FU4aHZg7KcxOdrzsUiOhFREwklhV+auDCzZ3XLjpLokHJ2yPJTOjE6xsvjk8LkKKVinQuzC+SNihBMcH7iHCdGT+Fzh1HTxzhzdpqEZl6gwalzE1SqwyhujQN6F86MB79ftM2XX3/Hjz//RkBWubLwNr/yCzOvzpJSi3z8/RbvP22g2L30Tz1i64vfGazUGRw6zn2esNhYw97hIftmjpcaZzmk+JGuXF5iZWXduq2R2jE2129QrY6I4yVZXH6D2fk55O4g8fIUo1MbpBIGRqbMWxvXOD02gdsVonJyiPBhHa8cQQoFmg1q+qcIP2RFt3rMbOawuKigGAeEN2oghhY232yzD82uCCrNNxxXDWKhLCGxJrW17qddYMW256zcjK0t+9jXacPl9FjYDnZbc+1/rn9GS0unWOu05v4AkzFjaed0d8MAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Firefox の共有メニューに表示される Simplenote アプリ&quot;
        title=&quot;Firefox の共有メニューに表示される Simplenote アプリ&quot;
        src=&quot;/static/79a896db93147049813ddc973cb47ca2/b06ae/simplenote-share.png&quot;
        srcset=&quot;/static/79a896db93147049813ddc973cb47ca2/0d3e1/simplenote-share.png 140w,
/static/79a896db93147049813ddc973cb47ca2/908b1/simplenote-share.png 280w,
/static/79a896db93147049813ddc973cb47ca2/b06ae/simplenote-share.png 560w,
/static/79a896db93147049813ddc973cb47ca2/1e088/simplenote-share.png 840w,
/static/79a896db93147049813ddc973cb47ca2/302a4/simplenote-share.png 1080w&quot;
        sizes=&quot;(max-width: 560px) 100vw, 560px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;auto&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Simplenote にはアプリ版もある。僕がアプリ版に求める最も重要な条件として、共有メニューからメモを追加できるか、ということがあるのだが、これもちゃんとできた。よかった。これなら気になるサイトやツイートを心置きなくどんどん追加できる。&lt;/p&gt;
&lt;h2&gt;Google Keep と比べて劣っている面&lt;/h2&gt;
&lt;p&gt;画像を追加できない、リマインダーを設定できない、メモの背景色を設定できない、など。僕はどの機能もまともに使ったことがないので全く困らなかった。&lt;/p&gt;
&lt;h2&gt;総括&lt;/h2&gt;
&lt;p&gt;クセの無い、とてもシンプルなメモサービスで大変気に入った。先ほど Google Keep にあったメモを全部移し終えたところ。これからは、メモにはこの Simplenote を使っていこうと思う。ちなみに、 &lt;code class=&quot;language-text&quot;&gt;Ctrl + クリック&lt;/code&gt; でリンクを開くために、&lt;a href=&quot;https://staging.simplenote.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Beta 版&lt;/a&gt; を利用している。&lt;/p&gt;
&lt;p&gt;今のメモサービスの機能を使い切れていないな、と感じる人はぜひ試してみてほしい。この、潔いシンプルさがきっと気に入るはずだ。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[HOCHONO HOUSE.]]></title><description><![CDATA[AioiLight氏のブログが日々更新されていくのを見て、自分もせめて隔週更新の目標ぐらいは守ろうと思った。特に書くことも無いので、先日買ったCDの話でも。音楽は詳しくないので手短に。 先日、AmazonにてCDを…]]></description><link>https://misoni.me/blog/2020-7-20/</link><guid isPermaLink="false">https://misoni.me/blog/2020-7-20/</guid><pubDate>Mon, 20 Jul 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://wangel.aioilight.space&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;AioiLight氏のブログ&lt;/a&gt;が日々更新されていくのを見て、自分もせめて隔週更新の目標ぐらいは守ろうと思った。特に書くことも無いので、先日買ったCDの話でも。音楽は詳しくないので手短に。&lt;/p&gt;
&lt;p&gt;先日、AmazonにてCDを3枚ほど購入した。定額の音楽ストリーミングが一般的になったこの時代であるから、CDを買うなんて前時代的だと思う人も多いだろうが、これが案外悪くない。素人耳なので音質がどうのこうのといった面の評価はできないが、なんと言っても所有欲が満たされる。実際に重みを持った“モノ”が手元にあることはなんとも言えない満足感をもたらすのだ。&lt;/p&gt;
&lt;p&gt;3枚の中で特に気に入ったのが、細野晴臣の「&lt;a href=&quot;https://www.amazon.co.jp/dp/B07M61S1K3&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;HOCHONO HOUSE&lt;/a&gt;」。&lt;/p&gt;
&lt;p&gt;最近、細野晴臣の音楽にちょっとばかりハマっていて、その中でも70〜80年代の曲をYouTubeで聴くことが日課と化している。&lt;a href=&quot;https://www.youtube.com/watch?v=EBYT97fpdxc&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;横浜中華街のライブ&lt;/a&gt;や&lt;a href=&quot;https://www.youtube.com/watch?v=VvL8RA8-ks8&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;はらいそ&lt;/a&gt;あたりが特に良い。だが、この時代の曲を聴く人は、特に学生ともなるとなかなか居ないのが少しばかり寂しいところ。&lt;/p&gt;
&lt;p&gt;今回購入した「HOCHONO HOUSE」は1973年発売の「HOSONO HOUSE」のリアレンジなのだが、これが非常に良かった。YouTubeに試聴動画が上がっているのでぜひ。&lt;/p&gt;
&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 50.598290598290596%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;iframe src=&quot;https://www.youtube.com/embed/thKq-_vHZI0?list=PLK2Oqv4xrqmRZUXxJZHoOwu5nRDQe-MIQ&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen style=&quot; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot;&gt;&lt;/iframe&gt; &lt;/div&gt;
&lt;p&gt;もう、めちゃくちゃ格好いい。HOSONO HOUSEはどことなくヒッピー的な精神を感じるというか、楽観主義のようなものが見られるのだが、このHOCHONO HOUSEでは、すっかりおじさんになってしまった細野晴臣の「今」の心境が如実に反映されているように思える。整然と敷き詰められた打ち込みの音がそう感じさせるのだろうか。2019年の音と1973年のメロディーが重なり、そこに細野晴臣らしい遊び心のエッセンスが加わっている。とても面白くて、格好いい。きっと大人になっても聴いているだろう。&lt;/p&gt;
&lt;p&gt;もっとこのアルバムの魅力を語りたいのだけれど、いかんせんこの分野はからっきし分からないものだから、うまく言語化することができない。とにかく、HOCHONO HOUSEは良い。そして、音楽は良い。沢山の音楽に触れて、心の拠り所となる音楽を見つけられたら、それはきっととても素敵なことだ。そんなところ。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ブログを作ってみた]]></title><description><![CDATA[気が触れたので、ブログを作った。これがそのブログである。 静的サイトジェネレーターにGatsbyを使っており、爆速で動き、ページ遷移の際の再レンダリングは最小限に抑えられ、Markdown形式で書かれた記事をコミットしたらGitHub Actions…]]></description><link>https://misoni.me/blog/2020-7-13-started/</link><guid isPermaLink="false">https://misoni.me/blog/2020-7-13-started/</guid><pubDate>Mon, 13 Jul 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;気が触れたので、ブログを作った。これがそのブログである。&lt;/p&gt;
&lt;p&gt;静的サイトジェネレーターにGatsbyを使っており、爆速で動き、ページ遷移の際の再レンダリングは最小限に抑えられ、Markdown形式で書かれた記事をコミットしたらGitHub Actionsで自動でビルドしてくれる。最近流行っている「イケてるブログ」だ。始めのうちはいっそHTMLを直打ちして90年台を彷彿とさせるブログでも作ってやろうかと思っていたのだが、巷に便利なツールが溢れているのを見るとそれも面倒に思えて、また少しでも自分の貧相な技術力の足しになればと思い「イケイケな技術」を使った「イケてるブログ」を作ることと相成った。&lt;code class=&quot;language-text&quot;&gt;gatsby-starter-blog&lt;/code&gt;という雛形を流用したこともあり案外簡単だった。ナウい人間が作ったヤングなツールは物事を簡素化してくれるようだ…少なくとも今のところは。因みにデザインがイケていないのは制作者である私のデザインセンスに起因する。未完成な部分も多々ある。というか何もかも未完成な状態のまま公開のみを急いだので、これから沢山修正していくことになるだろう。とりあえず、カテゴリとタグ、それにサイドバーを追加する予定だ。まあ、こんなブログを見に来る人が居るとも思えないし、それらは全て私の自己満足のためのオナニーでしか在り得ないだろう。&lt;/p&gt;
&lt;p&gt;ところで、ブログを作ろうと決めたは良いものの何を書こうかということは結構悩んだ。技術ブログを書くにはあまりに初心者だし、所謂「文章」を書く程の文才があるわけでもない。ブログを作った理由が「ブログを作りたかったから」なので、特に書きたい事があるわけでは無いのだ。&lt;/p&gt;
&lt;p&gt;なので、このブログは特にテーマを決めることはせず、怪文書を主体として私が書きたいことを適当に書き連ねるという運用をされることになるだろう。勿論、時たま技術的な内容を書くこともあるかも知れないし、急に政治的スタンスを全面に押し出した右とも左ともつかない気持ち悪いブログになるかも知れない。そういう時は、そっとタブを閉じて、Twitterで私に文句を言い、ブロックすればいい。インターネットは誰にとっても自由だ。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; margin-top: 20px; margin-bottom: 20px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3d5a44ed9dacec3f2de51a9a4ba02095/71c1d/markdown-cheatsheet.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABS0lEQVQoz41S0W6DMAzk/79mj/2FSUhd0SqYCgI0WMsgAUKC1r3c7EAQtNXUByt2Yl/ubHtaazxjwzDAGLP47n4cx82dty5w56DUNp79qqogpVzA2rZFnucQQtjPOM9bF1nj+HqdztU95yVJYkEdUwbKsgyKCDgczyVzkiH6pu+hDweYWaL7mU8GDMMQTdNYqQxYlqX1N5I54EdBcuTlgma3g6xrtF1nJbrks5A40/skcQLkT2rKvWMYxzF838f78YiAbL/fIwgCnE6nhWlRfqIoWGK3AHIdM34o2fVLzUNZT1brgcAukIJ9ao2ZeshD2fTwdpKP1mUCHlF+vSJOXtCrguIfmrJEmqYWeAN4N+kbY3Z6MGjEB2T7RhvwbVkyIA+JB7OszX9Aa+Z8VhUz+SXfLJKjKKJWFNs9fNaU6qlITYxtrOwW8IK7nD+Fy0ShPQHMqQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Markdownチートシート&quot;
        title=&quot;Markdownチートシート&quot;
        src=&quot;/static/3d5a44ed9dacec3f2de51a9a4ba02095/b06ae/markdown-cheatsheet.png&quot;
        srcset=&quot;/static/3d5a44ed9dacec3f2de51a9a4ba02095/0d3e1/markdown-cheatsheet.png 140w,
/static/3d5a44ed9dacec3f2de51a9a4ba02095/908b1/markdown-cheatsheet.png 280w,
/static/3d5a44ed9dacec3f2de51a9a4ba02095/b06ae/markdown-cheatsheet.png 560w,
/static/3d5a44ed9dacec3f2de51a9a4ba02095/1e088/markdown-cheatsheet.png 840w,
/static/3d5a44ed9dacec3f2de51a9a4ba02095/f43e4/markdown-cheatsheet.png 1120w,
/static/3d5a44ed9dacec3f2de51a9a4ba02095/71c1d/markdown-cheatsheet.png 1536w&quot;
        sizes=&quot;(max-width: 560px) 100vw, 560px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;auto&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;このブログはMarkdownで記事を書けるようになっているのだが、私は今まで一度もMarkdownを書いたことが無い。当分はこの&lt;a href=&quot;https://vivaldi.com&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Vivaldi&lt;/a&gt;が作ったお洒落なMarkdownチートシートを見ながら、ゆっくりと書くことになるだろう。正直なところ、Markdownはあまり書きやすい記法ではないように思える。&lt;a href=&quot;https://scrapbox.io/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer external&quot;&gt;Scrapbox&lt;/a&gt;記法ほど直感的な訳でもないし、HTMLと比べて書く必要がある文字数が少し減るだけだ。まあ、慣れてしまえばそんなことも感じなくなるのだろうが。&lt;/p&gt;
&lt;p&gt;何はともあれ、三日坊主にならないよう願いつつゆっくりと続けていこうと思う。可能であれば隔週更新を目指す。では。&lt;/p&gt;</content:encoded></item></channel></rss>